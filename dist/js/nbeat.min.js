!function(t){t.fn.a11yJumpMenu=function(){var e=this;this.addClass("a11y-jump-menu"),this.attr("tabindex",0),this.$fixture=t(['<div class="a11y-skip-nav">','  <ul class="a11y-toolbar" role="menubar">','    <li role="presentation">','      <a class="menu-item" role="button" id="a11y-jump-to-link" aria-haspopup="true" href="#" aria-controls="a11y-sub-menu" tabindex="0">',"        GÃ¥ til innhold &#8964;","      </a>",'      <ol id="a11y-sub-menu" role="menu" class="a11y-hidden" aria-expanded="false">',"      </ol>","    </li>",'    <li class="details" role="presentation">','      <a class="menu-item" id="a11y-feedback" href="mailto:">Gi oss tilbakemelding om tilgjengelighet</a>','      <button id="a11y-menu-close" class="close menu-item" role="button">Lukk meny</button>',"    </li>","  </ul>","</div>"].join("\n")),this.html(this.$fixture);var n=1;return t("h1, h2").each(function(){var e=t(this).attr("id"),s=t(this).text();"undefined"!=typeof e&&e!==!1||(e="hdr-"+n,++n,t(this).attr("id",e)),t("#a11y-sub-menu").append('<li role="menuitem"><a class="sub-item" tabindex="0" href="#'+e+'">'+s+"</a></li>")}),this.on("focus",function(){t("#a11y-jump-to-link").focus(),e.addClass("visible")}),t("#a11y-menu-close").on("click",function(t){t.handled!==!0&&(e.removeClass("visible"),t.handled=!0)}),t(".a11y-toolbar .menu-item").on("keydown",function(e){var n=t(this).attr("id");e.handled!==!0&&(39==e.keyCode?"a11y-jump-to-link"==n?t("#a11y-feedback").focus():"a11y-feedback"==n&&t("#a11y-menu-close").focus():37==e.keyCode&&("a11y-menu-close"==n?t("#a11y-feedback").focus():"a11y-feedback"==n&&t("#a11y-jump-to-link").focus()))}),t("#a11y-jump-to-link").on("keydown",function(e){if(e.handled!==!0){var n=t("#a11y-sub-menu").hasClass("a11y-hidden");n?(e.preventDefault(),e.stopPropagation(),40!=e.keyCode&&9!=e.keyCode||(t("#a11y-sub-menu").attr("aria-expanded",!0),t("#a11y-sub-menu").removeClass("a11y-hidden"),t("#a11y-sub-menu .sub-item").first().focus(),e.handled=!0)):40==e.keyCode&&(e.preventDefault(),e.stopPropagation(),t("#a11y-sub-menu .sub-item").first().focus())}}),t("#a11y-sub-menu .sub-item").each(function(e){t(this).on("keydown",function(e){e.handled!==!0&&(40==e.keyCode?(e.preventDefault(),e.stopPropagation(),t(this).parent().next().children("a").first().focus(),e.handled=!0):38==e.keyCode?(e.preventDefault(),e.stopPropagation(),t(this).parent().prev().children("a").first().focus(),e.handled=!0):39==e.keyCode&&t("#a11y-feedback").focus())})}),t("#a11y-jump-to-link").on("click",function(e){e.preventDefault(),e.stopPropagation(),e.handled!==!0&&(t("#a11y-sub-menu").attr("aria-expanded",!0),t("#a11y-sub-menu").removeClass("a11y-hidden"),e.handled=!0)}),t("#a11y-menu-close").on("focus",function(t){t.handled!==!0&&(e.addClass("visible"),t.handled=!0)}),t(e).on("keydown",function(t){27==t.keyCode&&t.handled!==!0&&(e.removeClass("visible"),t.handled=!0)}),this}}(jQuery),function(t){t.nbeatinput=function(t,e){this.init(t,e)},t.extend(t.nbeatinput.prototype,{settings:{cssClass:"nbeatinput",formId:null,useButton:!1,fillClass:"filled",inputIdTransform:function(t){return t+"-nbeatinput"},inputNameTransform:function(t){}},debug:!1,input:null,button:null,icon:null,init:function(e,n){this.settings=t.extend({},this.settings,n),this.input=t(e),this.renderControls(),this.settings.useButton&&(this.adjustButtonPosition(),this.setPreselectedIcon()),this.handleEvents()},renderControls:function(){this.icon=t("<span>").attr({id:this.settings.inputIdTransform(this.input.attr("id"))+"-icon"}).addClass("icon"),this.settings.useButton&&(this.button=t("<div>").attr({id:this.settings.inputIdTransform(this.input.attr("id"))+"-button",tabindex:0}).addClass("nbeatinput-icon").attr("role","button"),this.button.append(this.icon),this.input.after(this.button))},adjustButtonPosition:function(){var e=t("~ .input-group-btn",this.input);if(e.length>0){var n=e.width();this.button.css("right",n)}},handleEvents:function(){this.registerInputEvents(),this.settings.useButton&&this.registerButtonEvents()},setPreselectedIcon:function(){""!=this.input.val()&&this.setClearIcon()},registerInputEvents:function(){var t=this;this.input.on("keyup input change",function(e){t.inputIsEmpty()?(t.removeIcon(),t.input.removeClass(t.settings.fillClass)):(t.setClearIcon(),console.log("set class"),t.input.addClass(t.settings.fillClass))})},registerButtonEvents:function(){var t=this;this.button.mousedown(function(e){!0===t.debug&&console.log("icon: click"),e.preventDefault(),e.stopPropagation(),t.icon.hasClass("icon-close")&&(t.reset(),t.input.focus())}),this.button.keydown(function(e){switch(e.keyCode){case 13:e.preventDefault(),e.stopPropagation(),t.reset(),t.input.focus()}})},reset:function(){this.input.val(""),this.removeIcon()},focus:function(){this.input.focus()},inputIsEmpty:function(){return this.input.val().length<1},hasIcon:function(){return!!this.icon.hasClass("icon-close")},removeIcon:function(){this.icon.removeClass("icon-close")},setClearIcon:function(){this.icon.addClass("icon-close")},log:function(t){!0===this.debug&&console.log(t)}}),t.fn.nbeatinput=function(e){return this.each(function(){"INPUT"==this.tagName&&t(this).data("nbeatinput",new t.nbeatinput(this,e))}),this}}(jQuery),function(t){t.nbeatmenu=function(t,e){this.init(t,e)},t.extend(t.nbeatmenu.prototype,{settings:{cssClass:"nbeatmenu",formId:null,inputIdTransform:function(t){return t+"_nbeatmenu"},inputNameTransform:function(t){}},debug:!1,container:null,button:null,menu:null,isopen:!1,init:function(e,n){this.settings=t.extend({},this.settings,n),this.container=t(e),this.button=t(".menu-button",this.container),this.menu=t(".menu-data",this.container),this.handleEvents()},handleEvents:function(){var e=this,n=!1;this.button.on("click touchstart",function(t){return n||(n=!0,setTimeout(function(){n=!1},100),e.menu.toggleClass("visible"),e.isopen===!1?e.isopen=!0:e.isopen=!0),!1}),this.menu.on("click touchstart",function(t){var e=!1;e||(e=!0,setTimeout(function(){e=!1},100)),t.stopPropagation()}),t(document.body).on("click touchstart",function(t){if(e.isopen){var n=!1;n||(n=!0,setTimeout(function(){n=!1},100),e.menu.removeClass("visible"))}})},log:function(t){!0===this.debug&&console.log(t)}}),t.fn.nbeatmenu=function(e){return this.each(function(){t(this).data("nbeatmenu",new t.nbeatmenu(this,e))}),this}}(jQuery);var NbeatSelectSorter=function(){return{score:function(t,e){var n=t.toLowerCase().split(" "),s=e.length,e=e.toLowerCase();if(""==e)return 1;for(var i=0;i<n.length;++i)if(n[i].substring(0,s)==e)return 1;return 0}}}();!function(t){t.nbeatselect=function(t,e){this.init(t,e)},t.extend(t.nbeatselect.prototype,{settings:{sortBy:"score",preSelection:!0,selectedClass:"nbeatselect-selected",dropdownClass:"nbeatselect-dropdown",showDisabledOptions:!1,autoSubmit:!1,formId:null,inputIdTransform:function(t){return t+"-nbeatselect"},inputNameTransform:function(t){},dropdownIdTransform:function(t){return t+"-nbeatselect-dropdown"}},debug:!1,select:null,inputContainer:null,input:null,button:null,icon:null,dropdown:null,dropdownList:null,label:null,cache:[],results:[],lastAbbreviation:null,abbreviationBeforeFocus:null,selectedIndex:0,picked:!1,allowMouseMove:!0,dropdownMouseover:!1,indexOptgroupLabels:!1,visible:!1,init:function(e,n){this.settings=t.extend({},this.settings,n),this.select=t(e),this.reloadCache(),this.renderControls(),this.handleEvents(),this.setPreselectedIcon()},reloadCache:function(){var e,n,s,i,o=this.settings.indexOptgroupLabels;this.cache=this.select.find("option").map(function(){return e=t(this).text(),n=t(this).parent("optgroup").attr("label"),s=o?[e,n].join(" "):e,i=t(this).parent("optgroup").attr("disabled")||t(this).attr("disabled"),{text:t.trim(s),name:t.trim(e),value:t(this).val(),disabled:i,score:0}})},renderControls:function(){var e=this.settings.preSelection?this.select.find("option:selected"):null;this.inputContainer=t("<div>").addClass("nbeatselect-container"),this.input=t('<input type="text" autocomplete="off" />').attr({id:this.settings.inputIdTransform(this.select.attr("id")),name:this.settings.inputNameTransform(this.select.attr("name")),accesskey:this.select.attr("accesskey"),tabindex:this.select.attr("tabindex"),style:this.select.attr("style"),placeholder:this.select.attr("data-placeholder")}).addClass(this.select.attr("class")).val(t.trim(e?e.text():"")).css({visibility:"visible"}),this.icon=t("<span>").attr({id:this.settings.inputIdTransform(this.select.attr("id"))+"-icon"}).addClass("icon icon-arrow-down"),this.button=t("<div>").attr({id:this.settings.inputIdTransform(this.select.attr("id"))+"-button",tabindex:0}).addClass("nbeatselect-icon").attr("role","button").attr("tabindex","-1"),this.label=t("<label>").attr({id:this.settings.inputIdTransform(this.select.attr("id"))+"-label",tabindex:0}).text(this.select.attr("data-placeholder")).attr("tabindex","-1"),this.dropdown=t("<div></div>").attr({id:this.settings.dropdownIdTransform(this.select.attr("id"))}).addClass(this.settings.dropdownClass),this.dropdownList=t("<ul></ul>"),this.dropdown.append(this.dropdownList),this.button.append(this.icon),this.inputContainer.append(this.input),this.inputContainer.append(this.button),this.inputContainer.append(this.label),this.select.after(this.inputContainer),this.select.hide(),t("body").append(this.dropdown)},handleEvents:function(){this.registerInputEvents(),this.registerDropdownEvents(),this.registerButtonEvents()},registerInputEvents:function(){var e=this;this.input.click(function(){!0===e.debug&&console.log("input: click"),e.lastAbbreviation=null,e.focus(),e.renderDropdown()}),this.input.mouseup(function(t){!0===e.debug&&console.log("input: mouseup"),t.preventDefault()}),this.input.focus(function(){!0===e.debug&&console.log("input: focus"),e.abbreviationBeforeFocus=e.input.val(),e.input[0].setSelectionRange(0,e.input.val().length),e.picked||e.filterResults()}),this.input.blur(function(){!0===e.debug&&console.log("input: blur"),e.dropdownMouseover||(e.hide(),e.input.val().length<1&&e.setDefaultIcon())});var n=this.input;this.select.change(function(){!0===e.debug&&console.log("input: change"),n.val(t.trim(t(this).find("option:selected").text()))}),this.input.keyup(function(t){switch(!0===e.debug&&console.log("input: keyup"),t.keyCode){case 13:!0===e.debug&&console.log("input: enter"),t.preventDefault(),e.isVisible()===!0?(e.pickSelected(),e.focusAndHide()):(e.focusAndHide(),e.pickSelected(),e.submit(),e.setClearIcon());break;case 27:!0===e.debug&&console.log("input: escape"),t.preventDefault(),e.reset(),e.focusAndHide();break;case 40:break;case 38:break;default:e.filterResults()}}),this.input.keydown(function(t){switch(t.keyCode){case 9:e.pickSelected(),e.hide(),e.setClearIcon();break;case 33:t.preventDefault(),e.markFirst();break;case 34:t.preventDefault(),e.markLast();break;case 38:t.preventDefault(),e.moveSelected(-1);break;case 40:t.preventDefault(),e.moveSelected(1);break;case 13:case 27:t.preventDefault(),t.stopPropagation()}})},registerDropdownEvents:function(){var e=this;this.dropdownList.mouseover(function(n){if(!0===e.debug&&console.log("dropdownList: mouseover"),!e.allowMouseMove)return void(e.allowMouseMove=!0);if("LI"==n.target.tagName){var s=e.dropdown.find("li");e.markSelected(s.index(t(n.target)))}}),this.dropdownList.mouseleave(function(){!0===e.debug&&console.log("dropdownList: mouseleave"),e.markSelected(-1)}),this.dropdownList.mouseup(function(t){!0===e.debug&&console.log("dropdownList: mouseup"),e.pickSelected(),e.focusAndHide(),e.setClearIcon(),e.submit()}),this.dropdownList.bind("touchstart",function(n){if(!0===e.debug&&console.log("dropdownList: touchstart"),"LI"==n.target.tagName){var s=e.dropdown.find("li");e.markSelected(s.index(t(n.target)))}}),this.dropdown.mouseover(function(t){!0===e.debug&&console.log("dropdown: mouseover"),e.dropdownMouseover=!0}),this.dropdown.mouseleave(function(t){!0===e.debug&&console.log("dropdown: mouseleave"),e.dropdownMouseover=!1}),this.dropdown.mousedown(function(t){!0===e.debug&&console.log("dropdown: mousedown"),t.preventDefault()})},registerButtonEvents:function(){var t=this;this.button.mousedown(function(e){!0===t.debug&&console.log("icon: click"),e.preventDefault(),e.stopPropagation(),t.icon.hasClass("icon-close")?(t.fullReset(),t.input.focus(),t.markSelected(0),t.pickSelected(),t.submit()):t.icon.hasClass("icon-arrow-down")&&(t.focus(),t.dropdown.show())}),this.button.keydown(function(e){switch(e.keyCode){case 13:e.preventDefault(),e.stopPropagation(),t.fullReset(),t.input.focus()}})},filterResults:function(){var e=this.settings.showDisabledOptions,n=this.input.val(),s=[],i=this.input.val();n!=this.lastAbbreviation&&(t.each(this.cache,function(){this.disabled&&!e||(this.score=NbeatSelectSorter.score(this.text,n),this.score>0&&s.push(this))}),this.results=s,""==i||"name"==this.settings.sortBy?this.sortResultsByName():this.sortResultsByScore(),this.renderDropdown(),this.markFirst(),this.lastAbbreviation=n,this.picked=!1,this.allowMouseMove=!1,0===i.length?this.removeIcon():i.length>0&&this.setClearIcon())},sortResultsByScore:function(){this.results.sort(function(t,e){return e.score-t.score})},sortResultsByName:function(){this.results.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0})},renderDropdown:function(){var e=this.settings.showDisabledOptions,n=this.dropdown.outerWidth()-this.dropdown.innerWidth(),s=this.inputContainer.offset(),i="",o="";this.dropdown.css({width:this.inputContainer.outerWidth()-n+2+"px",top:s.top+this.inputContainer.outerHeight()+"px",left:s.left+"px",maxHeight:""}),t.each(this.results,function(){this.disabled&&!e||(o=this.disabled?' class="disabled"':"",i+="<li"+o+">"+this.name+"</li>")}),this.dropdownList.html(i),this.adjustMaxHeight(),this.dropdown.show()},adjustMaxHeight:function(){var e=t(window).height()+t(window).scrollTop()-this.dropdown.outerHeight(),n=parseInt(this.dropdown.css("top"),10),s=n>e?Math.max(0,e-n+this.dropdown.innerHeight())+"px":"";this.dropdown.css("max-height",s)},markSelected:function(e){if(!(0>e||e>=this.results.length)){var n=this.dropdown.find("li"),s=t(n[e]),i=s.position().top,o=i+s.outerHeight()-this.dropdown.height();if(s.hasClass("disabled"))return void(this.selectedIndex=null);this.selectedIndex=e,n.removeClass(this.settings.selectedClass),s.addClass(this.settings.selectedClass),o>0?(this.allowMouseMove=!1,this.dropdown.scrollTop(this.dropdown.scrollTop()+o)):0>i&&(this.allowMouseMove=!1,this.dropdown.scrollTop(Math.max(0,this.dropdown.scrollTop()+i)))}},pickSelected:function(){var t=this.results[this.selectedIndex];t&&!t.disabled?(this.input.val(t.name),this.setValue(t.value),this.picked=!0,this.input.addClass("filled")):this.reset()},setValue:function(t){this.select.val()!==t&&this.select.val(t).change()},hide:function(){this.dropdown.hide(),this.lastAbbreviation=null,this.visible=!1},moveSelected:function(t){this.markSelected(this.selectedIndex+t)},markFirst:function(){this.markSelected(0)},markLast:function(){this.markSelected(this.results.length-1)},reset:function(){this.input.val(this.abbreviationBeforeFocus)},fullReset:function(){this.input.val(""),this.lastAbbreviation=null,this.picked=!1,this.input.removeClass("filled")},focus:function(){this.input.focus()},focusAndHide:function(){this.focus(),this.hide()},submit:function(){if(this.settings.autoSubmit===!0){var e=t("#"+this.settings.formId);e.submit()}},isVisible:function(){return this.visible===!0},removeIcon:function(){this.icon.removeClass("icon-arrow-down icon-close")},setPreselectedIcon:function(){""!=this.input.val()&&this.setClearIcon()},setDefaultIcon:function(){this.icon.removeClass("icon-close").addClass("icon-arrow-down")},setClearIcon:function(){this.icon.removeClass("icon-arrow-down").addClass("icon-close")},log:function(t){!0===this.debug&&console.log(t)}}),t.fn.nbeatselect=function(e){return this.each(function(){t(this).data("nbeatselect")?t(this).data("nbeatselect").reloadCache():"SELECT"==this.tagName&&t(this).data("nbeatselect",new t.nbeatselect(this,e))}),this}}(jQuery);