!function(t){t.nbeatinput=function(t,n){this.init(t,n)},t.extend(t.nbeatinput.prototype,{settings:{cssClass:"nbeatinput",formId:null,useButton:!1,fillClass:"filled",inputIdTransform:function(t){return t+"-nbeatinput"},inputNameTransform:function(t){}},debug:!1,input:null,button:null,icon:null,init:function(n,i){this.settings=t.extend({},this.settings,i),this.input=t(n),this.renderControls(),this.settings.useButton&&(this.adjustButtonPosition(),this.setPreselectedIcon()),this.handleEvents()},renderControls:function(){this.icon=t("<span>").attr({id:this.settings.inputIdTransform(this.input.attr("id"))+"-icon"}).addClass("icon"),this.settings.useButton&&(this.button=t("<div>").attr({id:this.settings.inputIdTransform(this.input.attr("id"))+"-button",tabindex:0}).addClass("nbeatinput-icon").attr("role","button"),this.button.append(this.icon),this.input.after(this.button))},adjustButtonPosition:function(){var n=t("~ .input-group-btn",this.input);if(n.length>0){var i=n.width();this.button.css("right",i)}},handleEvents:function(){this.registerInputEvents(),this.settings.useButton&&this.registerButtonEvents()},setPreselectedIcon:function(){""!=this.input.val()&&this.setClearIcon()},registerInputEvents:function(){var t=this;this.input.on("keyup input change",function(n){t.inputIsEmpty()?(t.removeIcon(),t.input.removeClass(t.settings.fillClass)):(t.setClearIcon(),t.input.addClass(t.settings.fillClass))})},registerButtonEvents:function(){var t=this;this.button.mousedown(function(n){!0===t.debug&&console.log("icon: click"),n.preventDefault(),n.stopPropagation(),t.icon.hasClass("icon-close")&&(t.reset(),t.input.focus())}),this.button.keydown(function(n){switch(n.keyCode){case 13:n.preventDefault(),n.stopPropagation(),t.reset(),t.input.focus()}})},reset:function(){this.input.val(""),this.removeIcon()},focus:function(){this.input.focus()},inputIsEmpty:function(){return this.input.val().length<1},hasIcon:function(){return!!this.icon.hasClass("icon-close")},removeIcon:function(){this.icon.removeClass("icon-close")},setClearIcon:function(){this.icon.addClass("icon-close")},log:function(t){!0===this.debug&&console.log(t)}}),t.fn.nbeatinput=function(n){return this.each(function(){"INPUT"==this.tagName&&t(this).data("nbeatinput",new t.nbeatinput(this,n))}),this}}(jQuery);