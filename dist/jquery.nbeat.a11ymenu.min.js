!function(e){e.fn.a11yJumpMenu=function(){var a=this;this.addClass("a11y-jump-menu"),this.attr("tabindex",0),this.$fixture=e(['<div class="a11y-skip-nav">','  <ul class="a11y-toolbar" role="menubar">','    <li role="presentation">','      <a class="menu-item" role="button" id="a11y-jump-to-link" aria-haspopup="true" href="#" aria-controls="a11y-sub-menu" tabindex="0">',"        GÃ¥ til innhold &#8964;","      </a>",'      <ol id="a11y-sub-menu" role="menu" class="a11y-hidden" aria-expanded="false">',"      </ol>","    </li>",'    <li class="details" role="presentation">','      <a class="menu-item" id="a11y-feedback" href="mailto:">Gi oss tilbakemelding om tilgjengelighet</a>','      <button id="a11y-menu-close" class="close menu-item" role="button">Lukk meny</button>',"    </li>","  </ul>","</div>"].join("\n")),this.html(this.$fixture);var n=1;return e("h1, h2").each(function(){var a=e(this).attr("id"),t=e(this).text();void 0!==a&&!1!==a||(a="hdr-"+n,++n,e(this).attr("id",a)),e("#a11y-sub-menu").append('<li role="menuitem"><a class="sub-item" tabindex="0" href="#'+a+'">'+t+"</a></li>")}),this.on("focus",function(){e("#a11y-jump-to-link").focus(),a.addClass("visible")}),e("#a11y-menu-close").on("click",function(e){!0!==e.handled&&(a.removeClass("visible"),e.handled=!0)}),e(".a11y-toolbar .menu-item").on("keydown",function(a){var n=e(this).attr("id");!0!==a.handled&&(39==a.keyCode?"a11y-jump-to-link"==n?e("#a11y-feedback").focus():"a11y-feedback"==n&&e("#a11y-menu-close").focus():37==a.keyCode&&("a11y-menu-close"==n?e("#a11y-feedback").focus():"a11y-feedback"==n&&e("#a11y-jump-to-link").focus()))}),e("#a11y-jump-to-link").on("keydown",function(a){!0!==a.handled&&(e("#a11y-sub-menu").hasClass("a11y-hidden")?(a.preventDefault(),a.stopPropagation(),40!=a.keyCode&&9!=a.keyCode||(e("#a11y-sub-menu").attr("aria-expanded",!0),e("#a11y-sub-menu").removeClass("a11y-hidden"),e("#a11y-sub-menu .sub-item").first().focus(),a.handled=!0)):40==a.keyCode&&(a.preventDefault(),a.stopPropagation(),e("#a11y-sub-menu .sub-item").first().focus()))}),e("#a11y-sub-menu .sub-item").each(function(a){e(this).on("keydown",function(a){!0!==a.handled&&(40==a.keyCode?(a.preventDefault(),a.stopPropagation(),e(this).parent().next().children("a").first().focus(),a.handled=!0):38==a.keyCode?(a.preventDefault(),a.stopPropagation(),e(this).parent().prev().children("a").first().focus(),a.handled=!0):39==a.keyCode&&e("#a11y-feedback").focus())})}),e("#a11y-jump-to-link").on("click",function(a){a.preventDefault(),a.stopPropagation(),!0!==a.handled&&(e("#a11y-sub-menu").attr("aria-expanded",!0),e("#a11y-sub-menu").removeClass("a11y-hidden"),a.handled=!0)}),e("#a11y-menu-close").on("focus",function(e){!0!==e.handled&&(a.addClass("visible"),e.handled=!0)}),e(a).on("keydown",function(e){27==e.keyCode&&!0!==e.handled&&(a.removeClass("visible"),e.handled=!0)}),this}}(jQuery);